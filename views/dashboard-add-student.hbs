<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../img/lsu.ico" type="image/x-icon">
        <link rel="shortcut icon" href="../img/lsu.ico" type="image/x-icon">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

        <link rel="stylesheet" href="../css/normalize.css">
        <link rel="stylesheet" href="../css/styles.css">
        <link rel="stylesheet" href="../css/dashboard.css">

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
        <title>LSU Events and Attendance Tracking Website</title>
    </head>
<body>
    <header>
        <div class="row">
            <div class="column">
                <a href="/dashboard"><img src="../img/lsu.png" alt="LSU Logo" class="img-logo-landing"></a>
            </div>
            <div class="column">
                <a href="/help"><img src="../img/Question_fill.png" alt="Help and Resources" class="img-help"></a>
            </div>
        </div>
        <div class="dashboard-title">
            <h2>STUDENT PROFILE</h2>
        </div>
    </header>
    <div class="container-main-dashboard">
        <!-- navbar -->
        <nav>
            <div class="dashboard-nav">
                <div class="flex-container dashboard-nav-container">
                    <div class="flex-container img-participation-record-nav">
                        <a href="/university-events-admin">
                            <img src="../img/Folder.png" alt="Participation Record Nav Icon">
                        </a>
                    </div>
                    <a href="/university-events-admin">Participation Record</a>
                </div>
                <hr>
                <div class="flex-container dashboard-nav-container main-icons-container">
                    <div class="flex-container img-add-student-nav main-nav-icons">
                        <a href="/dashboard-add-student">
                            <img src="../img/User_cicrle.png" alt="Add Student Account Nav Icon">
                        </a>
                    </div>
                    <a href="/dashboard-add-student">ADD STUDENT</a>
                </div>
                <div class="flex-container dashboard-nav-container main-icons-container">
                    <div class="flex-container img-archives-nav main-nav-icons">
                        <img src="../img/Arhive_alt_small.png" alt="Archives Nav Icon">
                    </div>
                    <a href="#">ARCHIVES</a>
                </div>

                <div class="container container-widget">
                    <div class="holder holder-widget">
                        <div class="icon icon-widget">
                            <a href="/logout">
                                <img src="../img/On_button.png" alt="Log Out Icon">
                            </a>
                        </div>
                        <div class="text text-widget text-widget-logout">
                            <a href="/logout" class="link-widget">LOG OUT</a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- add student profile -->
        <article>
            <form action="/university-events-admin" method="POST" class="container-dashboard">
                <div class="flex-container holder-dashboard">
                    <div class="flex-container container-dashboard-student-profile">
                        <div class="flex-container container-dashboard-student-profile-header">
                            <div class="dashboard-student-profile-header">
                                <h4>LAST NAME</h4>
                                <input type="text" id="lastnameInput" name="lastnameInput">
                            </div>
                            <div class="dashboard-student-profile-header">
                                <h4>FIRST NAME</h4>
                                <input type="text" id="firstnameInput" name="firstnameInput">
                            </div>
                            <div class="dashboard-student-profile-header">
                                <h4>MIDDLE NAME</h4>
                                <input type="text" id="middlenameInput" name="middlenameInput">
                            </div>
                        </div>
                    
                        <hr>
                    
                        <div class="flex-container container-dashboard-student-profile-body">
                            <div class="dashboard-student-profile-body">
                                <h4>ID NUMBER</h4>
                                <input type="text" id="idnumberInput" class="dashboard-input-body" name="idnumberInput" maxlength="10">
                            </div>
                            <div class="dashboard-student-profile-body">
                                <h4>DEPARTMENT</h4>
                                <select id="departmentInput" class="form-control dashboard-input-body" name="departmentInput" >
                                    <option disabled="disabled" selected="selected"></option>
                                    <option value="CAS">CAS</option>
                                    <option value="CBA">CBA</option>
                                    <option value="CCJE">CCJE</option>
                                    <option value="CCSEA">CCSEA</option>
                                    <option value="CON">CON</option>
                                    <option value="CTE">CTE</option>
                                    <option value="CTHM">CTHM</option>
                                </select>
                            </div>
                            <div class="dashboard-student-profile-body">
                                <h4>COURSE</h4>
                                <input type="text" class="dashboard-input-body" id="courseInput" name="courseInput">
                            </div>
                            <div class="dashboard-student-profile-body">
                                <h4>YEAR</h4>
                                <input type="number" class="dashboard-input-body" id="yearInput" name="yearInput">
                            </div>
                        </div>
                    
                        <div class="flex-container dashboard-button">
                            <button type="button" id="addStudentProfile" class="buttons">ADD</button>
                        </div>

                        <div class="popup-container" id="popupContainer">
                            <div class="popup-box">
                                <span class="close-button" onclick="closePopupConfirmation()">&times;</span>
                                <h4>Add Student Profile?</h4>
                                <p>Please double-check information</p>
                                <div id="paragraphOne" class="paragraphPass"></div>
                                <div id="paragraphTwo" class="paragraphPass"></div>
                                <div id="paragraphThree" class="paragraphPass"></div>
                                <div id="paragraphFour" class="paragraphPass"></div>
                                <button class="buttons" onclick="confirmAction()">CONFIRM</button>
                                <button class="buttons" onclick="closePopupConfirmation()">CANCEL</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </article>
    </div>
     Welcome {{ first_name }} {{ last_name }}
    <script>
        function showPopupConfirmation() {
            const lastNameInput = document.getElementById('lastnameInput');
            const lastName = lastNameInput.value;
            const confirmationMessageOne = `${lastName}`;

            const firstNameInput = document.getElementById('firstnameInput');
            const firstName = firstNameInput.value;
            const confirmationMessageTwo = `${firstName}`;

            const middleNameInput = document.getElementById('middlenameInput');
            const middleName = middleNameInput.value;
            const confirmationMessageThree = `${middleName}`;

            const idNumberInput = document.getElementById('idnumberInput');
            const idNumber = idNumberInput.value;
            const confirmationMessageFour = `${idNumber}`;

            const departmentInput = document.getElementById('departmentInput');
            const department = departmentInput.value;
            const confirmationMessageFive = `${department}`;

            const courseInput = document.getElementById('courseInput');
            const course = courseInput.value;
            const confirmationMessageSix = `${course}`;

            const yearInput = document.getElementById('yearInput');
            const year = yearInput.value;
            const confirmationMessageSeven = `${year}`;
            
            document.getElementById("paragraphOne").innerHTML = 
            `${confirmationMessageOne}, ${confirmationMessageTwo} ${confirmationMessageThree}`;
            document.getElementById("paragraphTwo").innerHTML = `${confirmationMessageFour}`;
            document.getElementById("paragraphThree").innerHTML = `${confirmationMessageFive}`;
            document.getElementById("paragraphFour").innerHTML = `${confirmationMessageSix} - ${confirmationMessageSeven}`;

            const popup = document.getElementById('popupContainer');
            popup.style.display = 'block';
        }

        function closePopupConfirmation() {
            const popup = document.getElementById('popupContainer');
            popup.style.display = 'none';
        }

        function confirmAction() {
            // Extract data from the form
            const lastName = $('#lastnameInput').val();
            const firstName = $('#firstnameInput').val();
            const middleName = $('#middlenameInput').val();
            const idNumber = $('#idnumberInput').val();
            const department = $('#departmentInput').val();
            const course = $('#courseInput').val();
            const year = $('#yearInput').val();

            // Create a data object to send to the server
            const formData = {
                lastnameInput: lastName,
                firstnameInput: firstName,
                middlenameInput: middleName,
                idnumberInput: idNumber,
                departmentInput: department,
                courseInput: course,
                yearInput: year,
            };

            // Send a POST request to your Express route
            $.ajax({
                type: 'POST',
                url: '/university-events-admin',
                data: formData,
                success: function (response) {
                    // Handle the server's response if needed
                    console.log(response);

                    // Close the popup
                    closePopupConfirmation();
                },

                error: function (error) {
                    console.error('Error:', error);
                    // Handle the error if needed
                },
            });
        }

        // Attach the showPopup function to the "ADD" button click event
        document.getElementById('addStudentProfile').addEventListener('click', showPopupConfirmation);
    </script>
</body>
</html>